<% layout('./layout/layout') %>

    <div class="w-full sm:w-1/2 mx-auto p-4">
        <h1 class="text-2xl font-bold mb-4" >Search on date</h1>
        <form action="/transaction/date/check" method="GET">
            
                <label for="startDate">Starting date </label>
                <input class="bg-zinc-100 rounded-xl pl-4 p-2 w-full" type="date" name="startDate" id="startDate"
                    required>
          
            <label for="endDate">Ending date </label>
            <input class="bg-zinc-100 rounded-xl pl-4 p-2 w-full" type="date" name="endDate" id="endDate" required>
        
    <input
        class="m-4 bg-black text-white p-2 hover:bg-white hover:text-black hover:border hover:border-black rounded-xl"
        type="submit" value="Submit">
    </form>


    <% if(transactions.length ){ %>
        <h1>Transactions from <%= startDate %> to <%= endDate %>
        </h1>

        <h2>Transaction Details</h2>
        <table>
            <thead>
                <tr>
                    <th>Book Name</th>
                    <th>Issued To</th>
                    <th>Issue Date</th>
                </tr>
            </thead>
            <tbody>
                <% transactions.forEach(transaction=> { %>
                    <tr>
                        <td>
                            <%= transaction.book.bookName %>
                        </td>
                        <td>
                            <%= transaction.user.name %>
                        </td>
                        <td>
                            <%= transaction.issueDate.toDateString() %>
                        </td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>
        <% } %>

            <% if (transactions.length===0) { %>
                <p>No transactions found for this date range.</p>
                <% } %>
                    </div>